# @(#) /52 1.1 6/4/96 15:30:45 [12/22/96 21:57:01]

#
# COMPONENT_NAME: some
#
# ORIGINS: 27
#
#
# 10H9767, 10H9769  (C) COPYRIGHT International Business Machines Corp. 1992,1994
# All Rights Reserved
# Licensed Materials - Property of IBM
# US Government Users Restricted Rights - Use, duplication or
# disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
#

# Makefile for: emitdelphi    [Sun Jan 11 00:51:13 2015]
# Author: SOMObjects Emitter Framework

# We set SOMBASE to \som by default, if your installation is
# different and som has been installed elsewhere, then change the SOMBASE
# variable.
# SOMBASE     = \som
# To ensure that all other Makefiles generated by the newemit program have
# this information then alter the template file in 
# $(SOMBASE)\include\gen_mk32.efw to reflect this difference.
DLLDEST     = $(SOMBASE)\lib
EFWDEST     = $(SOMBASE)\include
INCLUDEPATH = -I$(SOMBASE)\include
LIBDIRPATH  = $(SOMBASE)\lib

SRCS        = emitdelphi.c delphi.c delphi.efw delphi.idl
OBJS        = emitdelphi.obj delphi.obj
TARGET      = emitdelphi.dll
CLEANFILES  = delphi.h

SCFLAGS     = -D__PRIVATE__ -sh;ih -m addstar
CC	    = icc
CFLAGS	    = -Q+ -I. -Ti+ -W3 
LINKER      = ilink
LDFLAGS     = /DEBUG 
LIBLIST     = somtk.lib 

.SUFFIXES: .c .idl .ih .obj

.c.obj:
	$(CC) -I. $(INCLUDEPATH) $(CFLAGS) -Ge- -c $<

.idl.ih:
	cmd /c "sc $(SCFLAGS) $*.idl"



$(TARGET): $(OBJS) $*.exp
	$(LINKER) /DLL /OUT:$@ $(LDFLAGS) $(OBJS) $*.exp $(LIBLIST)

$(TARGET:dll=exp): $(TARGET:dll=nid)
	ilib /GI $*.nid

clean:
	-del *.obj *.dll *.map *.ih $(CLEANFILES)

emitdelphi.obj: emitdelphi.c delphi.ih

delphi.obj: delphi.c delphi.ih

delphi.ih: delphi.idl

